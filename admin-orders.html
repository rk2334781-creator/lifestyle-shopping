<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Orders - Lifestyle Shopping</title>
  <link rel="stylesheet" href="styles1.css">
  <style>
    .orders-container {
      margin-top: 20px;
    }

    .order-card {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .order-card h3 {
      margin-bottom: 10px;
    }

    .order-card p {
      margin: 5px 0;
    }

    .order-card button {
      background-color: #e74c3c;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }

    .order-card button:hover {
      background-color: #c0392b;
    }
  </style>
</head>
<body>

<script>
  const user = localStorage.getItem("loggedInUser");
  const adminEmails = ["admin@lifestyle.com"];
  if (!user || !adminEmails.includes(user)) {
    alert("Access denied. Admins only!");
    window.location.href = "index1.html";
  }
</script>

<header>
  <h1>Admin Orders</h1>
  <nav>
    <a href="admin.html">Dashboard</a>
    <a href="admin-orders.html">Orders</a>
    <a href="admin-users.html">Users</a>
    <a href="index1.html">Site Home</a>
  </nav>
</header>

<main>
  <h2>All Orders</h2>
  <div id="ordersContainer" class="orders-container"></div>
</main>

<footer>
  <p>&copy; 2025 Lifestyle Shopping</p>
</footer>

<script>
  let orders = JSON.parse(localStorage.getItem("orders")) || [];

  function renderOrders() {
    const container = document.getElementById("ordersContainer");
    container.innerHTML = "";

    if (orders.length === 0) {
      container.innerHTML = "<p>No orders placed yet.</p>";
      return;
    }

    orders.forEach((order, index) => {
      const orderCard = document.createElement("div");
      orderCard.className = "order-card";

      const productsHTML = order.items.map(item => `
        <p><strong>${item.name}</strong> — ₹${item.price} × ${item.quantity}</p>
      `).join("");

      orderCard.innerHTML = `
        <h3>Order #${index + 1}</h3>
        <p><strong>Buyer:</strong> ${order.email}</p>
        ${productsHTML}
        <p><strong>Total:</strong> ₹${order.total}</p>
        <button onclick="deleteOrder(${index})">Delete Order</button>
      `;

      container.appendChild(orderCard);
    });
  }

  function deleteOrder(index) {
    if (confirm("Are you sure you want to delete this order?")) {
      orders.splice(index, 1);
      localStorage.setItem("orders", JSON.stringify(orders));
      renderOrders();
    }
  }

  renderOrders();
</script>

</body>
</html>
